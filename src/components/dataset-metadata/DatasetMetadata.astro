---
import { format } from "date-fns";

import { Alert, AlertDescription, AlertTitle } from "@/components/ui/alert"
import { CheckCircle2Icon, InfoIcon } from "lucide-react"
import { cn } from "@/lib/utils";

const metaDataApiUrl =
  "https://data.cityofnewyork.us/api/views/metadata/v1/tvpp-9vvx.json";

const response = await fetch(metaDataApiUrl);
const data = await response.json();
---

<Alert className={cn("border-sky-200 bg-sky-50 text-sky-900 dark:border-sky-900 dark:bg-sky-950 dark:text-sky-50")}>
  <InfoIcon />
  <AlertTitle>Dataset version</AlertTitle>
  <AlertDescription>
  This data set was updated by the NYC Office of CECM on:

    {
      data && data.dataUpdatedAt
        ? format(new Date(data.dataUpdatedAt), "PPpp")
        : ""
    }
  </AlertDescription>

</Alert>